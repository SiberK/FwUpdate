<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Repository Content</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        ul {
            list-style-type: none;
            padding-left: 0;
        }
        li a {
            color: #007bff;
            text-decoration: none;
        }
        li a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>Repository Contents:</h1>
    <ul id="fileList"></ul>

    <!-- Скрипт для загрузки списка файлов -->
    <script type="module">
        // Функция для получения списка файлов из репозитория
        async function fetchFileList() {
            const repoURL = 'https://api.github.com/repos/siberk/fwupdate/contents';
            
            try {
                const response = await fetch(repoURL);
                if (!response.ok) throw new Error('Failed to load repository contents');
                
                const data = await response.json();
                return data.map(item => ({
                    name: item.name,
                    path: item.path,
                    type: item.type === 'dir' ? 'Directory' : 'File'
                }));
            } catch(error) {
                console.error("Error fetching file list:", error.message);
                document.getElementById('fileList').innerHTML = '<li>Error loading files.</li>';
            }
        }
        
        // Отображение списка файлов
        async function displayFiles() {
            const fileList = await fetchFileList();
            const listContainer = document.getElementById('fileList');
            
            fileList.forEach(file => {
                let linkText = `${file.name}`;
                if (file.type === 'Directory') {
                    linkText += '/'; // Показываем папки с косым слешем
                }
                const li = document.createElement('li');
                const anchor = document.createElement('a');
                anchor.href = `/tree/master/${file.path}`; // Здесь можно настроить ссылку на просмотр файла или каталога
                anchor.textContent = linkText;
                li.appendChild(anchor);
                listContainer.appendChild(li);
            });
        }
    
        window.onload = () => {
            displayFiles(); // Загружаем файлы сразу после полной загрузки страницы
        };
    </script>
</body>
</html>